# generated by {{whoami()}}
# PWD={{PWD}}
[Interface]
PrivateKey = {{peers[name]['private']}}
ListenPort = {{peers[name]['port']}}
{% if 'address' in peers[name] %}
Address = {{peers[name]['address']}}
{% endif %}
{% if 'dns' in peers[name] %}
DNS = {{peers[name]['dns']}}
{% endif %}

{% for k, v in peers.items() %}
{% if k != name and not v.get('disable') %}
[Peer]
{% if 'host' in v %}
Endpoint = {{v['host']}}:{{v['port']}}
{% endif %}
PublicKey = {{v['public']}}
AllowedIPs = {{v['address']+'/32' if 'address' in v }}{{ ',' if 'net' in v }}{{v.get('net', '')}}
{% if 'keepalive' in v %}
PersistentKeepalive = {{v['keepalive']}}
{% endif %}

{% endif %}
{% endfor %}